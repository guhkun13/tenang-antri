{{if .Error}}
<!-- Error State -->
<div class="bg-white rounded-xl shadow-lg p-6 text-center">
  <i class="fas fa-exclamation-triangle text-5xl text-red-500 mb-4"></i>
  <h3 class="text-xl font-bold text-gray-800 mb-2">Ticket Not Found</h3>
  <p class="text-gray-600">{{.Error}}</p>
</div>
{{else if .TrackingInfo}}
<!-- Tracking Info Card -->
<div class="bg-white rounded-xl shadow-2xl overflow-hidden">
  <!-- Header with Category Color -->
  <div
    class="p-6"
    style="background: linear-gradient(135deg, {{.TrackingInfo.CategoryColor}} 0%, {{.TrackingInfo.CategoryColor}}dd 100%);"
  >
    <div class="flex items-center justify-between text-white">
      <div>
        <p class="text-sm opacity-90 mb-1">Ticket Number</p>
        <p class="text-4xl font-bold">{{.TrackingInfo.TicketNumber}}</p>
      </div>
      <div class="text-right">
        <p class="text-sm opacity-90 mb-1">Service</p>
        <p class="text-xl font-semibold">{{.TrackingInfo.CategoryName}}</p>
      </div>
    </div>
  </div>

  <!-- Status Badge -->
  <div class="px-6 py-4 bg-gray-50 border-b">
    {{if eq .TrackingInfo.Status "waiting"}}
    <div class="flex items-center justify-center">
      <span
        class="px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full font-semibold flex items-center"
      >
        <i class="fas fa-hourglass-half mr-2"></i>Waiting in Queue
      </span>
    </div>
    {{else if eq .TrackingInfo.Status "serving"}}
    <div class="flex items-center justify-center">
      <span
        class="px-4 py-2 bg-green-100 text-green-800 rounded-full font-semibold flex items-center animate-pulse"
      >
        <i class="fas fa-bell mr-2"></i>Now Being Served
      </span>
    </div>
    {{else if eq .TrackingInfo.Status "completed"}}
    <div class="flex items-center justify-center">
      <span
        class="px-4 py-2 bg-blue-100 text-blue-800 rounded-full font-semibold flex items-center"
      >
        <i class="fas fa-check-circle mr-2"></i>Completed
      </span>
    </div>
    {{else if eq .TrackingInfo.Status "cancelled"}}
    <div class="flex items-center justify-center">
      <span
        class="px-4 py-2 bg-red-100 text-red-800 rounded-full font-semibold flex items-center"
      >
        <i class="fas fa-times-circle mr-2"></i>Cancelled
      </span>
    </div>
    {{else if eq .TrackingInfo.Status "no_show"}}
    <div class="flex items-center justify-center">
      <span
        class="px-4 py-2 bg-gray-100 text-gray-800 rounded-full font-semibold flex items-center"
      >
        <i class="fas fa-user-times mr-2"></i>No Show
      </span>
    </div>
    {{end}}
  </div>

  <!-- Main Info -->
  <div class="p-6">
    {{if eq .TrackingInfo.Status "waiting"}}
    <!-- Queue Position and Wait Time -->
    <div class="grid grid-cols-2 gap-6 mb-6">
      <div class="text-center p-6 bg-purple-50 rounded-xl">
        <i class="fas fa-users text-3xl text-purple-600 mb-2"></i>
        <p class="text-sm text-gray-600 mb-1">Your Position</p>
        <p class="text-5xl font-bold text-purple-600">
          {{.TrackingInfo.QueuePosition}}
        </p>
      </div>
      <div class="text-center p-6 bg-orange-50 rounded-xl">
        <i class="fas fa-clock text-3xl text-orange-600 mb-2"></i>
        <p class="text-sm text-gray-600 mb-1">Estimated Wait</p>
        <p class="text-5xl font-bold text-orange-600">
          {{.TrackingInfo.EstimatedWaitMin}}
        </p>
        <p class="text-sm text-gray-600">minutes</p>
      </div>
    </div>
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
      <p class="text-blue-800 text-sm">
        <i class="fas fa-info-circle mr-1"></i>
        Please stay nearby. Your number is being called soon.
      </p>
    </div>
    {{else if eq .TrackingInfo.Status "serving"}}
    <!-- Now Serving -->
    <div class="text-center p-8 bg-green-50 rounded-xl mb-6">
      <i class="fas fa-bell text-6xl text-green-600 mb-4 animate-bounce"></i>
      <h3 class="text-2xl font-bold text-gray-800 mb-2">
        Please Proceed to Counter
      </h3>
      {{if .TrackingInfo.CounterNumber}}
      <div class="mt-4">
        <p class="text-gray-600 mb-2">Counter Number</p>
        <p class="text-6xl font-bold text-green-600">
          {{.TrackingInfo.CounterNumber}}
        </p>
        {{if .TrackingInfo.CounterName}}
        <p class="text-lg text-gray-700 mt-2">{{.TrackingInfo.CounterName}}</p>
        {{end}}
      </div>
      {{end}}
    </div>
    {{else if eq .TrackingInfo.Status "completed"}}
    <!-- Completed -->
    <div class="text-center p-8">
      <i class="fas fa-check-circle text-6xl text-blue-600 mb-4"></i>
      <h3 class="text-2xl font-bold text-gray-800 mb-2">Service Completed</h3>
      <p class="text-gray-600">Thank you for visiting us!</p>
    </div>
    {{else}}
    <!-- Other statuses -->
    <div class="text-center p-8">
      <i class="fas fa-info-circle text-5xl text-gray-400 mb-4"></i>
      <h3 class="text-xl font-bold text-gray-800 mb-2">
        Ticket Status: {{.TrackingInfo.Status}}
      </h3>
      <p class="text-gray-600">This ticket is no longer active.</p>
    </div>
    {{end}}
  </div>

  <!-- Footer -->
  <div class="px-6 py-4 bg-gray-50 border-t text-center text-sm text-gray-600">
    <i class="fas fa-calendar-alt mr-1"></i>
    Created: {{formatDate .TrackingInfo.CreatedAt}}
    <span class="mx-2">â€¢</span>
    <i class="fas fa-sync-alt mr-1"></i>
    Auto-updating every 10 seconds
  </div>
</div>
{{end}}
